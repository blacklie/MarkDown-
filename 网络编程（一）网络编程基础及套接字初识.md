#网络编程基础#

协议：就是一个相互都能识别的约定

网络中充斥着各种各样的协议，正是由于这些协议的存在，才能使得全球范围内的用户都能使用网络。

网络的目的是用来进行数据传输的，刚开始的时候每家厂商所使用的通信协议各不相同，为了能够连接更多的用户，有人统一了这些网络协议，这样就实现全网互通了。

网络间的数据传输就必须使用同一个标准协议：网络通信协议

网络通信环境特别复杂
在网络通信中需要应对的场景各有不同，因此协议也相对比较复杂，并且特别多，为了使用更加的方便，于是对协议进行了封装/分层。

协议的封装/分层：使用更加方便，使用场景更加清晰

协议的封装/分层：就是按照各个协议的不同功能以及不同的应对场景对不同的协议进行分层


###OSI七层参考模型###
    应用层
    表示层
    会话层
    传输层
    网络层
    数据链路层
    物理层

###TCP/IP五层参考模型###
     
  

      应用层：负责应用程序之间的数据沟通；                    常见协议：HTTP/HTTPS FTP SMTP 
      传输层：负责端与端之间的数据传输；                     常见协议：TCP/UDP
      网络层：负责地址管理和路由选择；                       常见协议：IP                    常见设备：路由器  
      数据链路层：负责相邻设备节点之间的数据传输；             	常见协议：以太网协议             常见设备：交换机
      物理层：负责光电信号的传输（数据在底层所走过的真实路径）；  常见协议：以太网协议             常见设备：集线器\

###数据的封装与分用###
![](https://github.com/blacklie/-/raw/master/91bebb8ab7fc715b46e045675a0cb4cb.png)
     
#网络编程套接字#

    ip地址：唯一定位网络上的一台主机
           无符号四个字节的整数---uint3_t
    端口：用来标识一台主机上的进程
         无符号两个字节的数据---uint16_t

    
    进程的标识为什么不用PID?
    因为PID是会随着进程的创建改变的
   
    sip + sport + dip  + dport + proto  五元组
    (源IP) + (源端口) + (目的IP) + (目的端口) + (协议)
    
    网络字节序：大端字节序--为了让不同主机字节序的主机之间能够进行正常的通信
    注意：面试中遇到关于字节序的问题时 不管怎样都要回答使用的是大端字节序。
    
    大端字节序：低地址存高位
    小端字节序：低地址存低位
    不同字节序主机之间进行数据传输，将造成数据的逆序，也就得不到真正发送的数据。
    
    在网络间进行通信的时候必须使用大端字节序---网络字节序
    也就意味着如果主机是小端字节序，那么通信的是时候就要对数据逆序
    并不是所有数据都要逆序---主要是针对在内存中存储时，占据字节数大于一个字节的数据。

    为什么使用网络字节序？
    为了避免发送数据端和接收数据端的机器本地字节序不一致导致接收数据不一致

     
    主机字节序：大小端不一定---取决于CPU的架构

###网络套接字编程###

 主要说的是传输层 TCP/UDP
 
    TCP:面向连接，可靠传输:数据的可靠传输；面向字节流：传输灵活

    优点：可靠传输，传输灵活
    缺点：传输速度低，数据粘包

    UDP:无连接，不可靠，面向数据报

    优点：传输速度快，无粘包情况
    缺点：不可靠

针对数据安全性要求高的场景（文件传输）---使用TCP保证数据的可靠
针对数据安全性要求不是很高，但实时性要求高的场景（视频传输）---使用UDP保证传输的速度

###socket套接字编程###

网络编程涉及网卡的操作，因此操作系统提供了一套接口来供我们操作---socket接口
网络编程中分了两个端：服务器端程序和客户端程序
在网络编程中客户端就是主动的一方,并且客户端必须知道服务端的地址信息(ip + port），并且在这个指定的地址上等着别人。

UDP编程步骤：


    服务端：
            创建套接字
            建立网卡与进程之间的关系
            为套接字绑定地址信息（为套接字绑定地址端口，就是为了声明，去网卡接收数据的时候，接收的是哪一部分的数据（因为网卡上可能会有很多数据））
            发送或就接收套接字
            关闭套接字

---
    客户端：
           创建套接字
           为套接字绑定地址信息（不主动绑定）
           发送/接收
           关闭套接字


##接口
  
     socket()---创建
     bind()---绑定
     sendto()/recvfrom---发送/接收
     close ---关闭